/*! react-table 25-05-2016 Author: Erfang Chen */
function buildLAFConfigObject(a){var b=a.formatInstructions,c={multiplier:1,roundTo:2,unit:null,alignment:getColumnAlignment(a)};if(!b)return c;for(var d=b.split(/\s+/),e=0;e<d.length;e++){var f=d[e].split(":",2)[0];c[f]=d[e].split(":",2)[1]}return c}function computeCellAlignment(a,b,c){return b[c.colTag]&&!(b.isDetail||isNaN(b[c.colTag])&&isNaN(b[c.colTag].replace(/,/g,"")))?"right":a}function buildLabelForOmitCell(a,b){var c=buildCellLookAndFeel(a,b);return React.createElement("div",{className:"rt-cell-omit-container"},React.createElement("div",{className:"omit-content"},c.value))}function buildCellLookAndFeel(a,b,c){var d={classes:{},styles:{},value:{},omitted:!1},e=b[a.colTag]||"";a.formatConfig=null!=a.formatConfig?a.formatConfig:buildLAFConfigObject(a);var f=a.formatConfig;a.cellClassCallback&&(d.classes=a.cellClassCallback(b)),e=formatNumber(e,a,f),f.unit&&(e=e+" "+f.unit),"currency"==a.format&&(e="$"+e),"date"===a.format&&(e=convertDateNumberToString(a,e)),c&&isInt(a.columnSize)&&e.length>a.columnSize&&(e=e.substring(0,a.columnSize-7)+" ......",d.omitted=!0),d.styles.textAlign=computeCellAlignment(f.alignment,b,a);var g=b[a.text]?b[a.text].length:a.text.length;return d.styles.width=g+"em",d.value=e,f.showZeroAsBlank&&0==d.value&&(d.value=""),d}function isInt(a){return a===parseInt(a,10)}function getColumnAlignment(a){return"number"==a.format||"currency"==a.format?"right":"left"}function formatNumber(a,b,c){return isNaN(a)||"number"!=b.format&&"currency"!=b.format||(a*=c.multiplier,a=a.toFixed(c.roundTo),c.separator&&(a=applyThousandSeparator(a))),a}function applyThousandSeparator(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}function buildCustomMenuItems(a,b){return b.customMenuFactory&&"function"==typeof b.customMenuFactory?b.customMenuFactory(b,a):b.customMenuItems&&Array.isArray(b.customMenuItems)?b.customMenuItems:void 0}function clickFilterMenu(a,b){a.props.filtering&&a.props.filtering.disable||(toggleFilterBox.call(a,a,b),a.setState({}))}function clickFilterSearch(a,b){a.props.filtering&&a.props.filtering.disable||(toggleSearchBox.call(a,a,b),a.setState({}))}function toggleSearchBox(a,b){var c=a.state.searchInPlace;c[b.colTag]=!c[b.colTag];for(var d in c)d!==b.colTag&&(c[d]=!1);a.setState({searchInPlace:c}),setTimeout(function(a){if(a[b.colTag]){var c=$(this.refs["header-"+b.colTag].getDOMNode()),d=c.position(),e=$(this.refs["search-filter-"+b.colTag].getDOMNode());0!==d.left&&e.css("left",d.left+"px"),0!==d.right&&e.css("right",d.right+"px")}}.bind(this,c))}function buildMenu(a){var b=a.table,c=a.columnDef,d=a.style,e=a.isFirstColumn,f={};const g={top:"-20%",padding:"5px"};"right"==d.textAlign?f.right="0%":f.left="0%";var h=[],i={sort:[React.createElement(SubMenu,{onMenuClick:b.handleSetSort.bind(null,c,null),table:b,menuItem:React.createElement("span",null,React.createElement("i",{className:"fa fa-sort"}),"Sort"),subMenu:React.createElement("div",{className:"rt-header-menu",style:g},React.createElement("div",{className:"menu-item",onClick:b.handleSetSort.bind(null,c,"asc")},React.createElement("i",{className:"fa fa-sort-alpha-asc"}),"Asc"),React.createElement("div",{className:"menu-item",onClick:b.handleSetSort.bind(null,c,"desc")},React.createElement("i",{className:"fa fa-sort-alpha-desc"}),"Desc"),React.createElement("div",{className:"separator"}),React.createElement("div",{className:"menu-item",onClick:b.handleAddSort.bind(null,c,"asc")},React.createElement("i",{className:"fa fa-plus"}),React.createElement("i",{className:"fa fa-sort-alpha-asc"}),"Add Asc"),React.createElement("div",{className:"menu-item",onClick:b.handleAddSort.bind(null,c,"desc")},React.createElement("i",{className:"fa fa-plus"}),React.createElement("i",{className:"fa fa-sort-alpha-desc"}),"Add Desc"),React.createElement("div",{className:"separator"}),React.createElement("div",{className:"menu-item",onClick:b.clearSort},React.createElement("i",{className:"fa fa-ban"}),"Clear All Sort"))})],filter:[React.createElement(SubMenu,{table:b,menuItem:React.createElement("span",null,React.createElement("i",{className:"fa fa-filter"}),"Filter"),subMenu:React.createElement("div",{className:"rt-header-menu",style:g},React.createElement("div",{className:"menu-item",onClick:clickFilterMenu.bind(null,b,c)},React.createElement("i",{className:"fa fa-filter"}),"Filter"),"number"==c.format?"":React.createElement("div",{className:"menu-item",onClick:clickFilterSearch.bind(null,b,c)},React.createElement("i",{className:"fa fa-search"}),"Search"),React.createElement("div",{className:"separator"}),React.createElement("div",{className:"menu-item",onClick:b.handleClearFilter.bind(null,c)},"Clear Filter"),React.createElement("div",{className:"menu-item",onClick:b.handleClearAllFilters},"Clear All Filters"))})],summarize:[React.createElement(SubMenu,{table:b,onMenuClick:"number"==c.format||"currency"==c?null:b.handleSubtotalBy.bind(null,c,null),menuItem:React.createElement("span",null,React.createElement("i",{className:"fa fa-list-ul"}),"Subtotal"),subMenu:c.format==DATE_FORMAT&&null!=c.formatInstructions?React.createElement("div",{className:"rt-header-menu",style:g},React.createElement(SubtotalControl,{table:b,columnDef:c}),React.createElement(SubtotalControlForDates,{freq:DAILY,table:b,columnDef:c}),React.createElement(SubtotalControlForDates,{freq:WEEKLY,table:b,columnDef:c}),React.createElement(SubtotalControlForDates,{freq:MONTHLY,table:b,columnDef:c}),React.createElement(SubtotalControlForDates,{freq:QUARTERLY,table:b,columnDef:c}),React.createElement(SubtotalControlForDates,{freq:YEARLY,table:b,columnDef:c}),React.createElement("div",{className:"menu-item",onClick:b.handleClearSubtotal},React.createElement("i",{className:"fa fa-ban"}),"Clear All Subtotal")):React.createElement("div",{className:"rt-header-menu",style:g},React.createElement(SubtotalControl,{table:b,columnDef:c}),React.createElement("div",{className:"menu-item",onClick:b.handleClearSubtotal},React.createElement("i",{className:"fa fa-ban"}),"Clear All Subtotal"))})],summarizeClearAll:[React.createElement(SubMenu,{table:b,menuItem:React.createElement("span",null,React.createElement("i",{className:"fa fa-list-ul"}),"Subtotal"),subMenu:React.createElement("div",{className:"rt-header-menu",style:g},React.createElement("div",{className:"menu-item",onClick:b.handleClearSubtotal},React.createElement("i",{className:"fa fa-ban"}),"Clear All Subtotal"))})],remove:[React.createElement("div",{className:"menu-item",onClick:b.handleRemove.bind(null,c)},React.createElement("i",{className:"fa fa-remove"}),"Remove Column")]};if(b.props.defaultMenuItems)for(var j=0;j<b.props.defaultMenuItems.length;j++){var k=b.props.defaultMenuItems[j];addMenuItems(h,i[k])}else addMenuItems(h,i.sort),b.props.filtering&&b.props.filtering.disable||addMenuItems(h,i.filter),e&&0!=b.state.subtotalBy.length?addMenuItems(h,i.summarizeClearAll):addMenuItems(h,i.summarize),e||b.props.disableRemoveColumn||(h.push(React.createElement("div",{className:"separator"})),addMenuItems(h,i.remove));var l=buildCustomMenuItems(b,c);return h.push(l),e&&(h.push(React.createElement("div",{className:"separator"})),b.props.disableExporting||(h.push(React.createElement("div",{className:"menu-item",onClick:b.handleDownload.bind(null,"excel")},React.createElement("i",{className:"fa fa-file-excel-o"}),"Download as XLS")),b.props.disableDownloadPDF||h.push(React.createElement("div",{className:"menu-item",onClick:b.handleDownload.bind(null,"pdf")},React.createElement("i",{className:"fa fa-file-pdf-o"}),"Download as PDF"))),h.push(React.createElement("div",{className:"menu-item",onClick:b.handleCollapseAll},"Collapse All")),h.push(React.createElement("div",{className:"menu-item",onClick:b.handleExpandAll},"Expand All"))),React.createElement("div",{style:f,className:"rt-header-menu"+(b.state.filterInPlace[c.colTag]||b.state.searchInPlace[c.colTag]?" rt-hide":"")},h)}function addMenuItems(a,b){for(var c=0;c<b.length;c++)a.push(b[c])}function toggleFilterBox(a,b){var c=a.state.filterInPlace;c[b.colTag]=!c[b.colTag];for(var d in c)d!==b.colTag&&(c[d]=!1);a.setState({filterInPlace:c}),setTimeout(function(a){if(a[b.colTag]){var c=$(this.refs["header-"+b.colTag].getDOMNode()),d=c.position(),e=null;e="number"==b.format?$(this.refs["numericFilterPanel-"+b.colTag].getDOMNode()):$(this.refs["select-filter-"+b.colTag].getDOMNode()),0!==d.left&&e.css("left",d.left+"px"),0!==d.right&&e.css("right",d.right+"px")}}.bind(this,c))}function pressedKey(a,b,c){const d=27;var e=b.colTag;a.state.filterInPlace[e]&&c.keyCode==d&&(a.state.filterInPlace[e]=!1,a.setState({filterInPlace:a.state.filterInPlace})),a.state.filterInPlace[e]&&"Enter"===c.key&&filter.call(a,a,b)}function pressedKeyInSearch(a,b,c){const d=27;var e=b.colTag;a.state.searchInPlace[e]&&c.keyCode==d&&(a.state.searchInPlace[e]=!1,a.setState({searchInPlace:a.state.searchInPlace})),a.state.searchInPlace[e]&&"Enter"===c.key&&search.call(a,a,b)}function selectFilters(a,b,c){a.state.selectedFilters=$(c.target).val(),a.setState({}),a.handleColumnFilter.call(null,b)}function addFilter(a,b,c){var d=c.target.value,e=null,f=!1;a.state.currentFilters.forEach(function(a){a.colDef===b&&(f=a.filterText.some(function(a){return a===d}),f||(a.filterText.push(d),e=a.filterText))}),f||(e||(a.state.currentFilters.push({colDef:b,filterText:[d]}),e=[d]),a.setState({}))}function search(a,b){var c=null;a.state.currentFilters.forEach(function(a){a.colDef===b&&(c=a.filterText)}),b.isFiltered=!0,a.state.searchInPlace[b.colTag]=!1,a.handleColumnFilter.call(null,b,c),$(this.refs["search-filter-"+b.colTag].getDOMNode()).addClass("rt-hide")}function filter(a,b){var c=null;a.state.currentFilters.forEach(function(a){a.colDef===b&&(c=a.filterText)}),b.isFiltered=!0,a.state.filterInPlace[b.colTag]=!1,a.handleColumnFilter.call(null,b,c),$(this.refs["select-filter-"+b.colTag].getDOMNode()).addClass("rt-hide")}function removeFilter(a,b,c,d){d.preventDefault(),a.state.currentFilters.forEach(function(d){d.colDef===b&&(d.filterText.splice(c,1),0==d.filterText.length&&a.handleClearFilter(b))}),a.setState({})}function changeSearchText(a,b,c){var d=c.target.value;if(d){var e=!1;a.state.currentFilters.forEach(function(a){a.colDef===b&&(e=!0,a.filterText=[d])}),e||a.state.currentFilters.push({colDef:b,filterText:[d]}),a.setState({})}}function buildSearchBox(a,b){return React.createElement("div",{className:"rt-select-filter-container "+(a.state.searchInPlace[b.colTag]?"":" rt-hide"),ref:"search-filter-"+b.colTag},React.createElement("div",{style:{display:"block",marginBottom:"2px"}},React.createElement("input",{className:"rt-"+b.colTag+"-filter-select rt-filter-select",onKeyDown:pressedKeyInSearch.bind(null,a,b),onChange:changeSearchText.bind(null,a,b)}),React.createElement("i",{style:{"float":"right",marginTop:"5px",marginRight:"4%"},className:"fa fa-search",onClick:search.bind(a,a,b)})))}function buildFilterList(a,b){if(a.state.filterData){var c=a.state.filterData[b.colTag];if(c&&(1!=c.length||"undefined"!=c[0])){c.sort();var d=[];d.push(React.createElement("option",{value:"default",style:{display:"none"}}));for(var e=0;e<c.length;e++){var f=c[e];b.format==DATE_FORMAT&&null!=b.formatInstructions&&(f=moment(parseInt(f)).utcOffset(0).format(b.formatInstructions)),d.push(React.createElement("option",{value:c[e]},f))}var g=[];return a.state.currentFilters.forEach(function(c){c.colDef===b&&c.filterText.forEach(function(c,d){b.format==DATE_FORMAT&&null!=b.formatInstructions&&(c=moment(parseInt(c)).utcOffset(0).format(b.formatInstructions)),g.push(React.createElement("div",{style:{display:"block",marginTop:"2px"}},React.createElement("input",{className:"rt-"+b.colTag+"-filter-input rt-filter-input",type:"text",value:c,readOnly:!0}),React.createElement("i",{style:{"float":"right",marginTop:"5px",marginRight:"4%"},className:"fa fa-minus",onClick:removeFilter.bind(null,a,b,d)})))})}),React.createElement("div",{className:"rt-select-filter-container "+(a.state.filterInPlace[b.colTag]?"":" rt-hide"),ref:"select-filter-"+b.colTag},React.createElement("div",{style:{display:"block",marginBottom:"2px"}},React.createElement("select",{className:"rt-"+b.colTag+"-filter-select rt-filter-select",onChange:addFilter.bind(null,a,b),onKeyDown:pressedKey.bind(null,a,b),value:c.length>1?"default":c[0]},d),React.createElement("i",{style:{"float":"right",marginTop:"5px",marginRight:"4%"},className:"fa fa-filter",onClick:filter.bind(a,a,b)})),React.createElement("div",{className:"separator"+(0==g.length?" rt-hide":"")}),React.createElement("div",{style:{display:"block"}},g))}}}function buildHeaders(a){for(var b=[],c=0;c<a.state.columnDefs.length;c++){var d=a.state.columnDefs[c];if(a.props.hideSubtotaledColumns){var e=a.state.subtotalBy.some(function(a){return a.colTag===d.colTag});if(e)continue}var f=0===c,g=findDefByColTag(a.state.sortBy,d.colTag),h=null;if(g){var i="asc"===g.sortType?"up":"down",j=0;a.state.sortBy.forEach(function(a,b){a.colTag==d.colTag&&(j=b+1)}),h=React.createElement("span",{style:{marginLeft:"3px"}},React.createElement("i",{style:{marginTop:"2px"},className:"fa fa-long-arrow-"+i}),React.createElement("sup",{style:{marginLeft:"2px"}},j))}var k={textAlign:"center"},l="rt-numeric-filter-container"+("number"===d.format&&a.state.filterInPlace[d.colTag]?"":" rt-hide"),m="btn-link rt-header-anchor-text",n=!!d.isFiltered;b.push(React.createElement("div",{className:"rt-headers-container",ref:"header-"+d.colTag},React.createElement("div",{onDoubleClick:a.handleSetSort.bind(null,d,null),style:k,className:"rt-header-element rt-info-header",key:d.colTag},React.createElement("a",{className:m,onClick:a.props.filtering&&a.props.filtering.disable?null:toggleFilterBox.bind(a,a,d)},buildHeaderLabel(a,d,f),h,React.createElement("i",{style:{marginLeft:"4px"},className:"fa fa-filter fa-inverse"+(n?"":" rt-hide")}))),a.state.filterInPlace[d.colTag]&&"number"===d.format?React.createElement("div",{className:l,ref:"numericFilterPanel-"+d.colTag},React.createElement(NumericFilterPanel,{clearFilter:a.handleClearFilter,addFilter:a.handleColumnFilter,colDef:d,currentFilters:a.state.currentFilters})):null,a.state.filterInPlace[d.colTag]?buildFilterList(a,d):null,a.state.searchInPlace[d.colTag]?buildSearchBox(a,d):null,buildMenu({table:a,columnDef:d,style:k,isFirstColumn:f})))}var o,p="btn-link rt-plus-sign";return!a.props.disableAddColumn&&a.props.cornerIcon&&(o=React.createElement("img",{src:a.props.cornerIcon}),p="btn-link rt-corner-image"),b.push(React.createElement("span",{className:"rt-header-element rt-add-column",style:{textAlign:"center"}},React.createElement("a",{className:p,onClick:a.props.disableAddColumn?null:a.handleAdd},React.createElement("strong",null,o?o:a.props.disableAddColumn?"":React.createElement("i",{className:"fa fa-plus"}))))),React.createElement("div",{className:"rt-headers-grand-container"},React.createElement("div",{key:"header",className:"rt-headers"},b))}function buildHeaderLabel(a,b,c){return c?buildFirstColumnLabel(a):React.createElement("span",null,b.text," ",b.isLoading?React.createElement("i",{className:"fa fa-spinner fa-spin"}):null)}function clickCheckbox(a,b){var c=a.table.props.checkboxCallback;if(b?(a.data.treeNode.isChecked=!a.data.treeNode.isChecked,checkAllChildren(a.data.treeNode,a.data.treeNode.isChecked)):a.data.isChecked=!a.data.isChecked,a.table.setState({}),c){var d=a.table.state.rootNode,e=[];d.ultimateChildren.forEach(function(a){if(a.isChecked){var b={};for(var c in a)"parent"!==c&&"isDetail"!==c&&"isChecked"!==c&&"sectorPath"!==c&&(b[c]=a[c]);e.push(b)}}),c(e)}}function checkAllChildren(a,b){a.ultimateChildren.forEach(function(a){a.isChecked=b}),a.children.forEach(function(a){a.isChecked=b,checkAllChildren(a,b)})}function buildFirstCellForSubtotalRow(a,b){var c,d,e=this.props,f=e.data,g=e.columnDefs[0],h=e.toggleHide,i=g.colTag,j=e.table.props.hasCheckbox,k=this.props.table.state.subtotalBy,l=f.isDetail?f.sectorPath.length:f.sectorPath.length-1,m={paddingLeft:10+25*l+"px"};if(c=!f.isDetail&&g.summaryTemplate?g.summaryTemplate.call(null,f):null,a)f[i]&&(m.width=f[i].length+"em"),d=React.createElement("div",{key:i,className:"rt-grand-total-cell"},React.createElement("div",{style:m,className:"rt-grand-total-cell-content"},f[i]?f[i]:React.createElement("span",null," ")));else if(b){var n=f.treeNode.noCollapseIcon,o=buildCellLookAndFeel(g,f,!0);d=React.createElement("td",{key:i,ref:g.colTag,onMouseEnter:o.omitted?showCellOmitContent.bind(this,g):null,onMouseLeave:o.omitted?hideCellOmitContent.bind(this,g):null,onContextMenu:this.props.cellRightClickMenu?openCellMenu.bind(this,g,o.omitted):this.props.onRightClick?this.props.onRightClick.bind(null,this.props.data,g):null},React.createElement("div",null,j?React.createElement("span",{style:{paddingLeft:"10px"}},React.createElement("input",{checked:e.data.treeNode.isChecked,type:"checkbox",onClick:clickCheckbox.bind(null,e,!0)})):"",React.createElement("a",{style:m,onClick:h.bind(null,f),className:"btn-link rt-expansion-link"},n?"":f.treeNode.collapsed?React.createElement("i",{className:"fa fa-plus"}):React.createElement("i",{className:"fa fa-minus"})),"  ",React.createElement("strong",null,o.value),c),o.omitted?buildLabelForOmitCell(g,this.props.data):null,this.props.cellRightClickMenu?buildCellMenu(this.props.cellRightClickMenu,this.props.data,g,this.props.columnDefs,k):null)}else if(!b)return d=React.createElement("td",{key:i},j?React.createElement("span",{style:{paddingLeft:"10px"}},React.createElement("input",{checked:e.data.isChecked,type:"checkbox",onClick:clickCheckbox.bind(null,e,!1)})):"");return d}function buildPageNavigator(a,b){return a.props.columnDefs.length>0&&!a.props.disablePagination?React.createElement(PageNavigator,{items:b.allPages.slice(b.pageDisplayRange.start,b.pageDisplayRange.end),activeItem:a.state.currentPage,numPages:b.pageEnd,handleClick:a.handlePageClick}):null}function numberWithCommas(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function buildFooter(a,b){var c=a.lowerVisualBound+1,d=Math.min(a.upperVisualBound+1,b);return React.createElement("div",null,React.createElement("p",{className:"rt-display-inline rt-footer-count"},"Showing "+c+" to "+d+" rows out of "+numberWithCommas(b)+" rows"),this.props.disableInfiniteScrolling?buildPageNavigator(this,a):null)}function findMaximumColumnSize(a,b){var c=-1;return b.forEach(function(b){var d=a.some(function(a){return a.colTag===b.colTag});d&&b.columnSize&&b.columnSize>c&&(c=b.columnSize)}),-1!=c?c:null}function addExtraColumnForSubtotalBy(){if(this.state.subtotalBy.length>0&&"subtotalBy"!==this.state.columnDefs[0].colTag){var a=findMaximumColumnSize(this.state.subtotalBy,this.state.columnDefs);this.state.columnDefs.unshift({colTag:"subtotalBy",text:getSubtotalHeaderLabel.call(this)||"Group",dataType:"string",columnSize:a});var b=this.state.sortBy.some(function(a){return"subtotalBy"===a.colTag});b&&this.state.rootNode.sortTreeBySubtotals(this.state.subtotalBy,"asc")}else 0==this.state.subtotalBy.length&&"subtotalBy"===this.state.columnDefs[0].colTag&&this.state.columnDefs.shift()}function getSubtotalHeaderLabel(){var a="[ ";return this.state.subtotalBy.forEach(function(b){a+=b.text+" -> "}),a.substring(0,a.length-4)+" ]"}function classifyRow(a,b,c){var d="",e=null;if("number"==b.format||"currency"==b.format||"date"==b.format&&null!=b.formatInstructions){var f=resolvePartitionName(b,a,c);d=f.sectorName,e=f.sortIndex}else d=a[b.colTag];return{sectorName:d||"Other",sortIndex:e}}function aggregateSector(a,b,c){for(var d={},e=0;e<b.length;e++)d[b[e].colTag]=aggregateColumn(a,b[e],c,b);return d}function resolvePartitionName(a,b,c){var d="",e="";if(a.subtotalByRange){if(null!=b[a.colTag]){for(var f=0;f<a.subtotalByRange.length;f++)if(b[a.colTag]<a.subtotalByRange[f]){if(a.format==DATE_FORMAT&&null!=a.formatInstructions){var g=moment(a.subtotalByRange[f-1]).utcOffset(0).format(a.formatInstructions),h=moment(a.subtotalByRange[f]).add(-1,"days").utcOffset(0).format(a.formatInstructions);d=c==YEARLY?new Date(b[a.colTag]).getFullYear():c==DAILY?g:c==MONTHLY?moment(a.subtotalByRange[f-1]).utcOffset(0).format("MMM YYYY"):g+" - "+h}else d=(0!=f?a.subtotalByRange[f-1]:0)+" - "+a.subtotalByRange[f];e=f;break}if(!d){if(a.format==DATE_FORMAT&&null!=a.formatInstructions){var i=new Date(a.subtotalByRange[a.subtotalByRange.length-1]),j=moment(i).utcOffset(0).format(a.formatInstructions);c==YEARLY?j=new Date(j).getFullYear():c==MONTHLY?j=moment(i).utcOffset(0).format("MMM YYYY"):c==DAILY&&(j=moment(i).utcOffset(0).format("YYYY/MM/DD")),d=j+"+"}else d=a.subtotalByRange[a.subtotalByRange.length-1]+"+";e=f+1}}}else d=a.format==DATE_FORMAT&&null!=a.formatInstructions?moment(b[a.colTag]).utcOffset(0).format(a.formatInstructions):b[a.colTag],a.format==DATE_FORMAT&&"number"==a.format&&(e=b[a.colTag]);return{sectorName:d,sortIndex:e}}function resolveAggregationMethod(a,b){var c;if("function"==typeof a.aggregationFunction)c=a.aggregationFunction;else if("string"==typeof a.aggregationMethod)c=a.aggregationMethod.toLowerCase();else if(a.conditionalAggregationMethod&&b&&1==b.length){var d=b[0].colTag;a.conditionalAggregationMethod[d]&&(c=a.conditionalAggregationMethod[d].toLowerCase())}return c}function removeFilteredRow(a){var b=[];return a.forEach(function(a){a.hiddenByFilter||b.push(a)}),b}function aggregateColumn(a,b,c,d){var e,f=resolveAggregationMethod(b,c);if(a=removeFilteredRow(a),0==a.length)return"";if("function"==typeof f)e=f({data:a,columnDef:b,columnDefs:d,subtotalBy:c});else switch(f){case"sum":e=_straightSumAggregation({data:a,columnDef:b});break;case"average":e=_average({data:a,columnDef:b});break;case"count":e=_count({data:a,columnDef:b});break;case"count_distinct":e=_countDistinct({data:a,columnDef:b});break;case"count_and_distinct":e=_countAndDistinct({data:a,columnDef:b});break;case"weighted_average":e=_weightedAverage({data:a,columnDef:b});break;default:e=""}return e}function _straightSumAggregation(a){for(var b=a.data,c=a.columnDef,d=0,e=0,f=0;f<b.length;f++)e=b[f][c.colTag]||0,d+=e;return d}function _average(a){return _simpleAverage(a)}function _simpleAverage(a){for(var b=_straightSumAggregation(a),c=0,d=0;d<a.data.length;d++)(a.data[d][a.columnDef.colTag]||0===a.data[d][a.columnDef.colTag])&&c++;return 0==c?"":b/c}function _weightedAverage(a){for(var b=a.data,c=a.columnDef,d=a.columnDef.weightBy,e=0,f=0;f<b.length;f++)e+=(b[f][c.colTag]||0)*(b[f][d.colTag]||0);var g=_straightSumAggregation({data:b,columnDef:d});return 0==g?"":e/g}function _count(a){return(a.data.length||0)+""}function _countDistinct(a){var b=a.data,c=a.columnDef;if(0==b.length)return 0;var d=a.data.map(function(a){return a[c.colTag]});c.format&&c.format.toLowerCase()===DATE_FORMAT&&(d=d.map(function(a){return convertDateNumberToString(c,a)}));const e=[];for(var f=0;f<d.length;f++)""!==d[f]&&null!==d[f]&&-1==e.indexOf(d[f])&&e.push(d[f]);return 1==e.length?e[0]:applyThousandSeparator(e.length)}function _countAndDistinctPureJS(a){var b=(a.data,a.columnDef),c=_count(a),d=_countDistinct(a);return 1==c?formatNumber(d,b,b.formatConfig):"("+applyThousandSeparator(d)+"/"+applyThousandSeparator(c)+")"}function convertDateNumberToString(a,b){var c=b;return a&&a.format&&a.format.toLowerCase()===DATE_FORMAT&&"number"==typeof b&&(c=null!=a.formatInstructions?moment(b).utcOffset(0).format(a.formatInstructions):new Date(b).toLocaleDateString()),c}function _countAndDistinctUnderscoreJS(a){var b=a.data,c=a.columnDef,d=_.pluck(b,c.colTag).sort(function(a,b){return a===b?0:a>b?1:-1});c.format&&c.format.toLowerCase()===DATE_FORMAT&&(d=d.map(function(a){return convertDateNumberToString(c,a)}));const e=_.chain(d).uniq(!0).compact().value();return c.formatConfig=buildLAFConfigObject(c),"("+(1===e.length?formatNumber(e[0],c,c.formatConfig):applyThousandSeparator(e.length))+"/"+applyThousandSeparator(b.length)+")"}function _countAndDistinct(a){return"function"==typeof _?_countAndDistinctUnderscoreJS(a):_countAndDistinctPureJS(a)}function exportToExcel(a,b,c){var d="<table><tr>";$.each(a.headers,function(a,b){d+="<td>"+parseString(b)+"</td>"}),d+="</tr>";var e=1;$.each(a.data,function(a,b){if(b.length>0&&"function"==typeof b[0].match&&b[0].match("Grand Total"))return void e++;d+="<tr>";var f=0;$.each(b,function(a,b){c.state.columnDefs[a]&&c.state.columnDefs[a].format&&"date"===c.state.columnDefs[a].format.toLowerCase()&&"number"==typeof b&&(b=new Date(b).toLocaleDateString()),d+="<td>"+parseString(b)+"</td>",f++}),e++,d+="</tr>"}),d+="</table>";var f="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:excel' xmlns='http://www.w3.org/TR/REC-html40'>";f+="<head>",f+="<!--[if gte mso 9]>",f+="<xml>",f+="<x:ExcelWorkbook>",f+="<x:ExcelWorksheets>",f+="<x:ExcelWorksheet>",f+="<x:Name>",f+="{worksheet}",f+="</x:Name>",f+="<x:WorksheetOptions>",f+="<x:DisplayGridlines/>",f+="</x:WorksheetOptions>",f+="</x:ExcelWorksheet>",f+="</x:ExcelWorksheets>",f+="</x:ExcelWorkbook>",f+="</xml>",f+="<![endif]-->",f+="</head>",f+="<body>",f+=d,f+="</body>",f+="</html>";var g=window.navigator.userAgent,h=g.indexOf("MSIE ");if(h>0||navigator.userAgent.match(/Trident.*rv\:11\./)){var i=$("<iframe></iframe>").css("display","none").attr("id","ieExcelFrame").appendTo("body");ieExcelFrame.document.open("txt/html","replace"),ieExcelFrame.document.write(f),ieExcelFrame.document.close(),ieExcelFrame.focus(),ieExcelFrame.document.execCommand("SaveAs",!0,b+".xls"),i.remove()}else{var j=$.base64.encode(f),k=b64toBlob(j,"application/vnd.ms-excel"),l=URL.createObjectURL(k);$("<a></a>").attr("download",b).attr("href",l).append("<div id='download-me-now'></div>").appendTo("body"),$("#download-me-now").click().remove()}}function b64toBlob(a,b,c){b=b||"",c=c||512;for(var d=atob(a),e=[],f=0;f<d.length;f+=c){for(var g=d.slice(f,f+c),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);var j=new Uint8Array(h);e.push(j)}var k=new Blob(e,{type:b});return k}function exportToPDF(a,b,c){var d={separator:",",ignoreColumn:[],tableName:"yourTableName",pdfFontSize:6,pdfLeftMargin:20},e=new jsPDF("l","pt","letter",!0),f=[],g=d.pdfLeftMargin;$.each(a.headers,function(a,b){var c=4.5*parseString(b,!0).length;(!f[a]||f[a]<c)&&(f[a]=Math.max(30,c))}),$.each(a.data,function(a,b){b.length>0&&"function"==typeof b[0].match&&b[0].match("Grand Total")||$.each(b,function(a,b){var c=4.5*parseString(b,!0).length;(!f[a]||f[a]<c)&&(f[a]=Math.max(30,c))})});var h=f.reduce(function(a,b){return a+b});if(h>752){var i=752/h;e.setFontSize(i*d.pdfFontSize);for(var j=0;j<f.length;j++)f[j]=f[j]*i}else e.setFontSize(d.pdfFontSize);$.each(a.headers,function(a,b){var c=f.reduce(function(b,c,d){return a>d?b+c:b},g);e.text(c,20,parseString(b,!0))});var k=20,l=1,m=0,n=1;$.each(a.data,function(a,b){b.length>0&&"function"==typeof b[0].match&&b[0].match("Grand Total")||(n++,n%50==0&&(e.addPage(),l++,n=1),m=k+10*n,$.each(b,function(a,b){var d=f.reduce(function(b,c,d){return a>d?b+c:b},g);c.state.columnDefs[a].format&&"date"===c.state.columnDefs[a].format.toLowerCase()&&"number"==typeof b&&(b=new Date(b).toLocaleDateString()),e.text(d,m,parseString(b,!0))}))}),e.output("save",b+".pdf")}function parseString(a,b){if("string"!=typeof a){if(!a||!a.toString)return"";a=a.toString()}var c=a.trim();return c=c.replace(/[^\x00-\x7F]/g,""),b&&(c=c.substr(0,20)),c}function mouseDown(a,b){this.props.table.state.mouseDown={row:a}}function mouseUp(a,b){if(a!==this.props.table.state.mouseDown.row){var c=this.props.table.state.mouseDown.row;this.props.table.state.mouseDown=null;var d=this.props.table.props.rowKey;if(!d||!a[d])return;var e=a.parent,f=Math.min(c.indexInParent,a.indexInParent),g=Math.max(c.indexInParent,a.indexInParent);this.props.table.state.selectedDetailRows={};for(var h=f;g>=h;h++){var i=e.ultimateChildren[h];this.props.table.toggleSelectDetailRow(i[d])}this.props.table.setState({})}}function generateSectorKey(a){return null==a?"":a.join("#")}function generateRowKey(a,b){var c;return c=a.isDetail?b?a[b]:a.rowCount:generateSectorKey(a.sectorPath)}function rowMapper(a){var b=this.props.rowKey,c=generateRowKey(a,b);return React.createElement(Row,{key:c,data:a,extraStyle:resolveExtraStyles(c,this.props.extraStyle),isSelected:isRowSelected(a,this.props.rowKey,this.state.selectedDetailRows,this.state.selectedSummaryRows),onSelect:this.handleSelect,onRightClick:this.props.onRightClick,toggleHide:this.handleToggleHide,columnDefs:this.state.columnDefs,filtering:this.props.filtering,handleColumnFilter:this.handleColumnFilter.bind,cellRightClickMenu:this.props.cellRightClickMenu,table:this})}function docClick(a){jQuery.isEmptyObject(this.state.filterInPlace)||$(a.target).hasClass("rt-headers-container")||$(a.target).parents(".rt-headers-container").length>0||this.setState({filterInPlace:{}})}function adjustHeaders(a){if(0!=this.state.rowNumToDisplay){var b=this.state.uniqueId;a>=0||(a=0);var c=0,d=$("#"+b+" .rt-headers-container"),e=$("#"+b+" .rt-headers-grand-container").width(),f=parseInt(d.first().find(".rt-header-element").css("padding-left"));f+=parseInt(d.first().find(".rt-header-element").css("padding-right"));var g=$("#"+b+" .rt-grand-total");g.width(e);var h=g.find(".rt-grand-total-cell"),i=g.find(".rt-grand-total-cell-content");i.each(function(a,b){if("inherit"===b.style.width){var c=$(b).text().length/2;c=6>c?6:c,$(b).css("width",c+"em")}});var j=!1;if(d.each(function(){var a=$(this),e=a.find(".rt-header-anchor-text").width()+f,g=$(i[c]).width()+10;e=g>e?g:e,a.width()>0&&e>a.width()+1&&(a.css("width",e+"px"),$("#"+b).find("tr:eq(0)").find("td:eq("+c+")").css("min-width",e+"px"),c!=h.length-1&&$(h[c]).css("width",e+"px"),j=!0);var k=$("#"+b+" .rt-table tr:first td:eq("+c+")").outerWidth()-1;0==c&&1==parseInt(d.first().css("border-right"))&&(k+=1),k!==a.width()&&(a.width(k),$(h[c]).width(k),j=!0),c++}),!j)return void i.each(function(a,b){$(b).css("width","inherit")});var k=d.find(".rt-downward-caret").removeClass("rt-downward-caret"),l=d.find(".rt-upward-caret").removeClass("rt-upward-caret");setTimeout(function(){k.addClass("rt-downward-caret"),l.addClass("rt-upward-caret")},0),5>=a&&adjustHeaders.call(this,++a)}}function bindHeadersToMenu(a){a.find(".rt-headers-container").each(function(){var a=this;$(a).hover(function(){var b=$(a).position();b.left&&$(a).find(".rt-header-menu").css("left",b.left+"px"),b.right&&$(a).find(".rt-header-menu").css("right",b.right+"px")})})}function uniqueId(a){var b=++idCounter+"";return a?a+b:b}function isRowSelected(a,b,c,d){if(a.isChecked)return!0;if(null!=b)return null!=c[a[b]]||!a.isDetail&&null!=d[generateSectorKey(a.sectorPath)]}function resolveExtraStyles(a,b){return a&&b?b[a]:null}function getPaginationAttr(a,b){var c={};if(a.props.disablePagination)c.lowerVisualBound=0,c.upperVisualBound=b.length;else{c.pageSize=a.props.pageSize||50,c.maxDisplayedPages=a.props.maxDisplayedPages||10,c.pageStart=1,c.pageEnd=Math.ceil(b.length/c.pageSize),c.allPages=[];for(var d=c.pageStart;d<=c.pageEnd;d++)c.allPages.push(d);c.pageDisplayRange=computePageDisplayRange(a.state.currentPage,c.maxDisplayedPages),c.lowerVisualBound=(a.state.currentPage-1)*c.pageSize,c.upperVisualBound=Math.min(a.state.currentPage*c.pageSize-1,b.length),c.lowerVisualBound>c.upperVisualBound&&(a.state.currentPage=1,c.lowerVisualBound=0,c.upperVisualBound=Math.min(c.pageSize-1,b.length))}return c}function computePageDisplayRange(a,b){var c=b,d=Math.min(Math.floor(c/2),a-1),e=c-d;return{start:a-d-1,end:a+e-1}}function buildFilterData(a){setTimeout(function(){a&&(this.state.filterDataCount={},this.state.filterData={});for(var b=0;b<this.props.data.length;b++)buildFilterDataHelper(this.props.data[b],this.state,this.props);convertFilterData(this.state.filterDataCount,this.state),a&&this.props.buildFiltersCallback&&this.props.buildFiltersCallback(this.state.filterDataCount)}.bind(this))}function buildFilterDataHelper(a,b,c){if(1!=a.hiddenByFilter){b.filterDataCount||(b.filterDataCount={});for(var d=b.columnDefs,e=0;e<d.length;e++)if("number"!=d[e].format&&d[e].colTag!=c.rowKey){
var f=d[e].colTag;if(a[f]){var g=b.filterDataCount[f]||{};g[a[f]]="undefined"==typeof g[a[f]]?1:g[a[f]]+1,b.filterDataCount[f]=g}}}}function convertFilterData(a,b){b.filterData={};for(var c in a){var d=a[c],e=[];for(var f in d)""!=f&&e.push(f);b.filterData[c]=e}}function hideCellOmitContent(a,b){b.preventDefault();var c=$(this.refs[a.colTag].getDOMNode()),d=c.find(".rt-cell-omit-container");d.css("display","none")}function showCellOmitContent(a,b){b.preventDefault();var c=$(this.refs[a.colTag].getDOMNode()),d=c.position(),e=c.find(".rt-cell-omit-container"),f=$(this.props.table.getDOMNode()).width(),g=e.width();if(f-(d.left+g)>20)e.css("left",d.left+"px");else{var h=c.width();if(d.left+h>f)var i=f-g-20;else i=d.left+h-g;e.css("left",i+"px")}e.css("display","block")}function openCellMenu(a,b,c){c.preventDefault();var d=$(this.refs[a.colTag].getDOMNode()),e=d.position(),f=d.find(".rt-cell-menu");if(0!==e.left&&f.css("left",e.left+"px"),0!==e.right&&f.css("right",e.right+"px"),f.css("display","block"),d.hover(null,function(){f.css("display","none")}),f.hover(null,function(){f.css("display","none")}),b){var g=d.find(".rt-cell-omit-container");g.css("display","none")}}function buildCellMenu(a,b,c,d,e){if(b.sectorPath&&b.sectorPath.length!=e.length+1)return null;var f=[],g={};return a.style&&"right"===a.style.textAlign?g.right="0%":g.left="0%",c.rightClickMenuItems?c.rightClickMenuItems.menus.forEach(function(a){f.push(React.createElement("div",{className:"menu-item",onClick:a.callback.bind(null,b,c,d,e)},a.description)),a.followingSeparator&&f.push(React.createElement("div",{className:"separator"}))}):a.menus.forEach(function(a){f.push(React.createElement("div",{className:"menu-item",onClick:a.callback.bind(null,b,c,d,e)},a.description)),a.followingSeparator&&f.push(React.createElement("div",{className:"separator"}))}),React.createElement("div",{style:g,className:"rt-cell-menu"},f)}function scrollPage(a,b){b.stopPropagation();var c=$(this.refs.scrollBody.getDOMNode()),d=$(this.refs.tableBody.getDOMNode()),e=c.scrollTop(),f=c.height(),g=d.height(),h=b.deltaY>0;if((e+f>=g&&h||0===e&&!h)&&(1==this.state.currentPage&&!h||this.state.currentPage==a.pageEnd&&h||b.preventDefault()),e+f>=g&&this.state.lastScrollTop===e&&h)var i=this.state.currentPage+1;else 0!==e||0!==this.state.lastScrollTop||h||(i=this.state.currentPage-1);i>0&&i<=a.pageEnd?(this.setState({currentPage:i,lastScrollTop:e}),setTimeout(function(){h?c.scrollTop(0):c.scrollTop(g-f)})):this.state.lastScrollTop=e}function flatSectorPath(a){for(var b="",c=1;c<a.length;c++)b+=a[c]+" -> ";return""!=b?b.substring(0,b.length-4):""}function ReactTableGetInitialState(){var a={uniqueId:uniqueId("table"),currentPage:1,lastScrollTop:0,columnDefs:this.props.columnDefs,subtotalBy:this.props.subtotalBy,sortBy:this.props.sortBy,lowerVisualBound:0,upperVisualBound:this.props.pageSize,extraStyle:{},filterInPlace:{},currentFilters:[],searchInPlace:{},rasterizedData:null,buildRasterizedData:!0,hideSingleSubtotalChild:this.props.hideSingleSubtotalChild};if(a.rootNode=getRootNodeGivenProps(this.props,a),a.sortBy.length>0&&a.rootNode.sortNodes(convertSortByToFuncs(a.columnDefs,a.sortBy)),addSubtotalTitleToRowData(a.rootNode),a.sortBy.length>0){var b=null;a.sortBy.forEach(function(a){"subtotalBy"===a.colTag&&(b=a)}),b?(a.sortBy.length=0,a.sortBy.push(b),a.rootNode.sortTreeBySubtotals(a.subtotalBy,b.sortType)):a.rootNode.sortNodes(convertSortByToFuncs(a.columnDefs,a.sortBy))}var c=getInitialSelections(this.props.selectedRows,this.props.selectedSummaryRows);return a.selectedDetailRows=c.selectedDetailRows,a.selectedSummaryRows=c.selectedSummaryRows,a}function getRootNodeGivenProps(a,b){return a.dataAsTree&&a.dataAsTreeTitleKey?(a.data=[],createNewNodeFromStrucutre(a.dataAsTree,a.dataAsTreeTitleKey)):createNewRootNode(a,b)}function addSubtotalTitleToRowData(a){null!=a&&(a.rowData.subtotalBy=a.sectorTitle,a.children.forEach(function(a){addSubtotalTitleToRowData(a)}))}function ReactTableHandleSelect(a,b){if(b.shiftKey){var c=this.props.rowKey;if(!c||!a[c])return;if(b.stopPropagation(),b.preventDefault(),this.state.shiftKey)if(this.state.shiftKey.firstRow){var d=a.parent,e=Math.min(this.state.shiftKey.firstRow.indexInParent,a.indexInParent),f=Math.max(this.state.shiftKey.firstRow.indexInParent,a.indexInParent);this.state.selectedDetailRows={};for(var g=e;f>=g;g++){var h=d.ultimateChildren[g];this.toggleSelectDetailRow(h[c])}}else this.state.shiftKey.firstRow=a;else this.state.shiftKey={firstRow:a}}else if(b.ctrlKey){var c=this.props.rowKey;if(!c||!a[c])return;if(null!=a.isDetail&&1==a.isDetail){var i=this.toggleSelectDetailRow(a[c]);this.props.onSelectCallback&&this.props.onSelectCallback(a,i)}else i=this.toggleSelectSummaryRow(generateSectorKey(a.sectorPath)),this.props.onSummarySelectCallback&&this.props.onSummarySelectCallback(a,i)}else{var j=!1;Object.keys(this.state.selectedDetailRows).length>0&&(this.state.selectedDetailRows={},j=!0),Object.keys(this.state.selectedSummaryRows).length>0&&(this.state.selectedSummaryRows={},j=!0),this.state.shiftKey&&!this.state.shiftKey.firstRow||(this.state.shiftKey={firstRow:null}),null!=a.isDetail&&1==a.isDetail?this.props.onRowClickCallback&&this.props.onRowClickCallback(a,!1):this.props.onSummaryRowClickCallback&&this.props.onSummaryRowClickCallback(a,!1),j&&this.setState({})}}function ReactTableHandleColumnFilter(a,b,c){if(a.isFiltered=!0,"boolean"!=typeof c&&(c=void 0),Array.isArray(b))var d=b;else{var e=$(b.target);e.is("span")?(d=e.text(),d.lastIndexOf("......")==d.length-6&&(d=e.parent().find(".omit-content").text())):(d=e.children("span").text(),d.lastIndexOf("......")==d.length-6&&(d=e.find(".omit-content").text()))}Array.isArray(d)||(d="number"==a.format?[{eq:d}]:[d]);var f=!(this.props.filtering&&this.props.filtering.caseSensitive===!1);if(!c)for(var g=0;g<this.state.currentFilters.length;g++)if(this.state.currentFilters[g].colDef===a){this.state.currentFilters.splice(g,1),this.handleClearFilter(a,!0);break}if(0!=d.length){var h;this.props.filtering&&this.props.filtering.customFilterer&&(h=this.props.filtering.customFilterer),this.state.rootNode.filterByColumn(a,d,f,h)}c||(buildFilterData.call(this,!0),this.state.currentFilters.push({colDef:a,filterText:d}),refreshSubtotaledRowData(this.state.rootNode,this.state,-1),this.setState({rootNode:this.state.rootNode,currentFilters:this.state.currentFilters,buildRasterizedData:!0})),this.props.afterFilterCallback&&this.props.afterFilterCallback(a,d)}function resetHiddenForAllTreeNodes(a){a.hiddenByFilter=!1;for(var b=0;b<a.children.length;b++)resetHiddenForAllTreeNodes(a.children[b])}function ReactTableHandleRemoveFilter(a,b){"boolean"!=typeof b&&(b=void 0);for(var c=0;c<this.state.rootNode.ultimateChildren.length;c++)this.state.rootNode.ultimateChildren[c].hiddenByFilter=!1;for(resetHiddenForAllTreeNodes(this.state.rootNode),c=0;c<this.state.currentFilters.length;c++)if(this.state.currentFilters[c].colDef===a){this.state.currentFilters.splice(c,1);break}for(c=0;c<this.state.currentFilters.length;c++)this.handleColumnFilter(this.state.currentFilters[c].colDef,this.state.currentFilters[c].filterText,!0);if(!b){buildFilterData.call(this,!0),a.isFiltered=!1;var d=this.state.filterInPlace;delete d[a.colTag],this.setState({filterInPlace:d,rootNode:this.state.rootNode,currentFilters:this.state.currentFilters,buildRasterizedData:!0})}this.props.afterFilterCallback&&this.props.afterFilterCallback(a,[])}function ReactTableHandleRemoveAllFilters(){recursivelyClearFilters(this.state.rootNode),buildFilterData.call(this,!0),this.state.columnDefs.forEach(function(a){a.isFiltered=!1}),this.state.currentFilters.forEach(function(a){this.props.afterFilterCallback&&this.props.afterFilterCallback(a.colDef,[])},this),this.state.currentFilters=[],this.setState({filterInPlace:{},rootNode:this.state.rootNode,buildRasterizedData:!0})}function recursivelyClearFilters(a){a.clearFilter();for(var b=0;b<a.children.length;b++)recursivelyClearFilters(a.children[b]);if(!a.hasChild())for(var b=0;b<a.ultimateChildren.length;b++)a.ultimateChildren[b].hiddenByFilter=!1}function applyAllFilters(){for(var a=0;a<this.state.currentFilters.length;a++)this.handleColumnFilter(this.state.currentFilters[a].colDef,this.state.currentFilters[a].filterText,!0);this.setState({rootNode:this.state.rootNode})}function ReactTableHandleClearSubtotal(a){a.stopPropagation();const b=this.state;b.buildRasterizedData=!0,b.currentPage=1,b.lowerVisualBound=0,b.upperVisualBound=this.props.pageSize;for(const c=this.state.subtotalBy;c.length>0;)c.pop();b.subtotalBy=c,destorySubtrees(b),this.state.sortBy.length>0&&b.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,this.state.sortBy)),applyAllFilters.call(this),this.setState(b)}function hideTreeNodeWhenNoChildrenToShow(a){if(a.hasChild()){for(var b=!0,c=0;c<a.children.length;c++)hideTreeNodeWhenNoChildrenToShow(a.children[c]),0==a.children[c].hiddenByFilter&&(b=!1);a.hiddenByFilter=b}else{for(var d=!1,e=0;e<a.ultimateChildren.length;e++){var f=a.ultimateChildren[e];if(0==f.hiddenByFilter){d=!0;break}}a.hiddenByFilter=!d}}function ReactTableHandleSubtotalBy(a,b,c){c.stopPropagation();const d=this.state.subtotalBy||[];if(this.state.scrollToLeft=!0,null!=b&&""!=b&&a)if(a.format==DATE_FORMAT&&null!=a.formatInstructions){for(var e=new Date("1/1/3002").getTime(),f=new Date("1/1/1002").getTime(),g=this.state.rootNode.ultimateChildren,h=g.length-1;h>=0;h--)tmp=g[h][a.colTag],tmp<e&&(e=tmp),tmp>f&&(f=tmp);if(b==WEEKLY||b==MONTHLY||b==DAILY||b==QUARTERLY||b==YEARLY)a.subtotalByRange=getParts(b,e,f),a.partitions=b;else{var i=[],j=b.split(",");for(h=0;h<j.length;h++)i.push(new Date(j[h]).getTime());a.subtotalByRange=i}}else a.subtotalByRange=partitionNumberLine(b);null!=a&&"SyntheticMouseEvent"!=a.constructor.name&&d.push(a);const k=this.state;k.currentPage=1,k.lowerVisualBound=0,k.upperVisualBound=this.props.pageSize,k.subtotalBy=d,k.buildRasterizedData=!0,buildSubtreeForNewSubtotal(k,b),this.state.sortBy.length>0&&k.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,this.state.sortBy)),this.state.currentFilters.length>0&&hideTreeNodeWhenNoChildrenToShow(this.state.rootNode),updateSubtoalColumnText.call(this),this.setState(k)}function updateSubtoalColumnText(){"subtotalBy"===this.state.columnDefs[0].colTag&&(this.state.columnDefs[0].text=getSubtotalHeaderLabel.call(this))}function getParts(a,b,c){var d=[],e=1,f="days";for(b=moment(b).startOf("day"),a==MONTHLY?(f="months",e=1,b=moment(b).startOf("month")):a==QUARTERLY?(f="months",e=3,b=moment(b).startOf("quarter")):a==YEARLY?(f="years",e=1,b=moment(b).startOf("year")):a==WEEKLY&&(f="days",e=7,b=moment(b).startOf("isoWeek")),d.push(1e3*b.unix());c>=b;)b=1e3*moment(b).add(e,f).unix(),d.push(b);return d}function ReactTableHandleAdd(){this.props.beforeColumnAdd&&this.props.beforeColumnAdd(this)}function ReactTableHandleRemove(a){for(var b=this.state.columnDefs.indexOf(a),c=[],d=0;d<this.state.columnDefs.length;d++)d!=b&&c.push(this.state.columnDefs[d]);this.setState({columnDefs:c,buildRasterizedData:!0}),null!=this.props.afterColumnRemove&&this.props.afterColumnRemove(c,a)}function ReactTableHandleToggleHide(a,b){b.stopPropagation(),a.treeNode.collapsed=!a.treeNode.collapsed,this.setState({buildRasterizedData:!0})}function ReactTableHandlePageClick(a){this.setState({currentPage:a})}function partitionNumberLine(a){var b,c,d=[];for(c=a.split(","),b=0;b<c.length;b++){var e=parseFloat(c[b]);isNaN(e)||d.push(e),d.sort(function(a,b){return a-b})}return d}function expandSubtotalLevelHelper(a,b,c){if(null!=c){b>=a?c.collapsed=!1:c.collapsed=!0;for(var d=0;d<c.children.length;d++)expandSubtotalLevelHelper(a+1,b,c.children[d])}}function expandSubtotalLevel(a,b){b.stopPropagation(),expandSubtotalLevelHelper(0,a,this.state.rootNode),this.setState({buildRasterizedData:!0})}function buildFirstColumnLabel(a){if(a.state.subtotalBy.length>0){var b=[];return a.state.subtotalBy.forEach(function(c,d){var e=a.state.columnDefs.filter(function(a){return a.colTag===c.colTag});if(0==e.length)throw"subtotalBy field '"+c.colTag+"' doesn't exist!";var f=d==a.state.subtotalBy.length-1?"":" -> ";b.push(React.createElement("span",{className:"rt-header-clickable",onClick:expandSubtotalLevel.bind(a,d)}," ",e[0].text,React.createElement("span",{style:{color:"white"}},f)))}),React.createElement("span",null," [ ",b," ] ")}return a.state.columnDefs[0].text}function getInitialSelections(a,b){var c={selectedDetailRows:{},selectedSummaryRows:{}};if(null!=a)for(var d=0;d<a.length;d++)c.selectedDetailRows[a[d]]=1;if(null!=b)for(var d=0;d<b.length;d++)c.selectedSummaryRows[b[d]]=1;return c}function getSortFunction(a,b,c){const d=a.format||"";var e=null;return c?(e=lexicalSorter[b].bind(c),a.sort&&a[b]?e=a.sort[b].bind(c):"date"===d&&(e=dateSorter[b].bind(c)),e):(e=lexicalSorter[b].bind(a),a.sort&&a[b]?e=a.sort[b].bind(a):"date"===d&&(e=dateSorter[b].bind(a)),e)}function convertSortByToFuncs(a,b){return b.map(function(b){const c=findDefByColTag(a,b.colTag);return c?getSortFunction(c,b.sortType):function(){}})}function findPositionByColTag(a,b){var c=-1;return $.each(a,function(a,d){d.colTag===b&&(c=a)}),c}function findDefByColTag(a,b){var c=null;return $.each(a,function(a,d){d.colTag===b&&(c=d)}),c}function createNewRootNode(a,b){var c=buildTreeSkeleton(a,b);return c.rowData=aggregateSector(c.ultimateChildren,b.columnDefs,b.subtotalBy),c.sortRecursivelyBySortIndex(),c.foldSubTree(),b.currentFilters.length>0&&b.subtotalBy.length>0&&hideSubtotalRow(c),c}function createNewNodeFromStrucutre(a,b,c){var d=new TreeNode(c?a[b]:"Grand Total",c);return _.each(a.children,function(a){a.children.length>0?d.children.push(createNewNodeFromStrucutre(a,b,d)):d.ultimateChildren.push(createNewNodeFromStrucutre(a,b,d))}),0==d.ultimateChildren.length?d.isDetail=!0:setupChildrenMap(d),_.each(a,function(a,b){_.isObject(a)||(d.rowData||(d.rowData={}),0==d.ultimateChildren.length?d[b]=a:d.rowData[b]=a)}),d}function setupChildrenMap(a){_.each(a.children,function(b){a.ultimateChildren=a.ultimateChildren.concat(b.ultimateChildren),a._childrenSectorNameMap[b.sectorTitle]=b})}function hideSubtotalRow(a){if(a.hasChild()){for(var b=!0,c=0;c<a.children.length;c++)hideSubtotalRow(a.children[c]),0==a.children[c].hiddenByFilter&&(b=!1);a.hiddenByFilter=b}else{for(var d=!1,e=0;e<a.ultimateChildren.length;e++){var f=a.ultimateChildren[e];d=d||!f.hiddenByFilter}a.hiddenByFilter=!d}}function buildSubtree(a,b,c,d){if(0==a.children.length||a.children.children&&0==a.children.children.length){for(var e=0;e<a.ultimateChildren.length;e++)populateChildNodesForRow(a,a.ultimateChildren[e],b,d);for(var f in a._childrenSectorNameMap){var g=a._childrenSectorNameMap[f];g.rowData=aggregateSector(g.ultimateChildren,c.columnDefs,b)}}else for(var h=0;h<a.children.length;h++)buildSubtree(a.children[h],b,c,d)}function refreshSubtotaledRowData(a,b,c){if(c>0)var d=b.subtotalBy[c];else d=[];a.rowData=aggregateSector(a.ultimateChildren,b.columnDefs,d);for(var e=0;e<a.children.length;e++)refreshSubtotaledRowData(a.children[e],b,c+1)}function buildSubtreeForNewSubtotal(a,b){var c=[a.subtotalBy[a.subtotalBy.length-1]];return buildSubtree(a.rootNode,c,a,b),a.rootNode.sortRecursivelyBySortIndex(),a.rootNode.foldSubTree(),a.rootNode}function destorySubtreesRecursively(a){if(0!=a.children.length){for(var b=0;b<a.children.length;b++)destorySubtreesRecursively(a.children[b]),a.children[b]=null;a.children=[],a._childrenSectorNameMap={}}}function destorySubtrees(a){destorySubtreesRecursively(a.rootNode),a.rootNode.ultimateChildren.forEach(function(a){a.hiddenByFilter=!1})}function buildTreeSkeleton(a,b){var c,d=new TreeNode("Grand Total",null),e=a.data;a.disableGrandTotal&&(d.display=!1);var f;if(null!=b.subtotalBy){for(f=[],c=0;c<b.subtotalBy.length;c++){var g=b.columnDefs.filter(function(a){return a.colTag==b.subtotalBy[c].colTag});null!=g[0]&&f.push(g[0])}b.subtotalBy=f}for(c=0;c<e.length;c++)d.appendUltimateChild(e[c]);return f.forEach(function(a){buildSubtree(d,[a],b,null)}),d}function recursivelyAggregateNodes(a,b){if(a.rowData=aggregateSector(a.ultimateChildren,b.columnDefs,b.subtotalBy),a.children.length>0)for(var c=0;c<a.children.length;c++)recursivelyAggregateNodes(a.children[c],b)}function populateChildNodesForRow(a,b,c,d){var e;if(null!=c&&0!=c.length)for(e=0;e<c.length;e++){const f=classifyRow(b,c[e],d);a.appendRowToChildren({childSectorName:f.sectorName,childRow:b,sortIndex:f.sortIndex,subtotalByColumnDef:c[e]})}}function TreeNode(a,b){this.sectorTitle=a,this.parent=b,this.subtotalByColumnDef={},this.rowData=null,this.display=!0,this.children=[],this.ultimateChildren=[],this.collapsed=null!=this.parent,this.sortIndex=null,this.hiddenByFilter=!1,this._childrenSectorNameMap={}}function buildCompositeSorter(a,b){return function(c,d){for(var e=0,f=0;0==f&&e<a.length;)f=b?a[e](c.rowData,d.rowData):a[e](c,d),e++;return f}}function sortTreeBySubtotalsHelper(a,b,c,d){if(!(d>=a.length)){var e=a[d],f={colTag:"subtotalBy",formatConfig:e.formatConfig},g=getSortFunction(e,b,f);c.hasChild()&&(c.children.sort(function(a,b){return g(a.rowData,b.rowData)}),c.children.forEach(function(c){sortTreeBySubtotalsHelper(a,b,c,d+1)}))}}function containsWildcart(a){var b=a[0];return 1==a.length&&(b.indexOf("?")>-1||b.indexOf("*")>-1)}function filterInArray(a,b,c,d){if(containsWildcart(a)){var e=a[0];e=e.toLowerCase(),e=e.replace(/\?/g,".?"),e=e.replace(/\*/g,".*");var f=new RegExp("^"+e),g=buildCellLookAndFeel(b,c).value.toString().toLowerCase(),h=g.match(f);return!h}if("date"===b.format&&"partitions"===a[0]){var i=a.slice(1,a.length);h=filterDateInPartitions(i,b,c)}else h=null,h=d?a.some(function(a){return buildCellLookAndFeel(b,c).value.toString()===a}):a.some(function(a){return buildCellLookAndFeel(b,c).value.toString().toUpperCase()===a.toUpperCase()});return!h}function filterDateInPartitions(a,b,c){var d=!1;switch(b.partitions.toLowerCase()){case"daily":d=a.some(function(a){return buildCellLookAndFeel(b,c).value.toString().toUpperCase()===a.toUpperCase()});break;case"weekly":case"quarterly":var e=a[0].split(" - "),f=new Date(e[0]).getTime(),g=new Date(e[1]).getTime(),h=c[b.colTag];h>=f&&g>=h&&(d=!0);break;case"monthly":var h=moment(c[b.colTag]).utcOffset(0).format("MMM YYYY");h===a[0]&&(d=!0);break;case"yearly":var h=moment(c[b.colTag]).utcOffset(0).format("YYYY");h===a[0]&&(d=!0)}return d}function _hasSortIndex(a){return null!=a&&null!=a.sortIndex&&!isNaN(a.sortIndex)}function rasterizeTree(a,b,c,d,e,f){var g=a.node,h=a.firstColumn,i=[];return d||(g=_decorateRowData(g,h,b,c),i=0==g.display?[]:[g.rowData]),1==g.ultimateChildren.length&&a.hideSingleSubtotalChild&&g.parent&&(g.ultimateChildren[0].hiddenBySingleSubtotalRow=!0,g.hasChild()?g.noCollapseIcon=!1:g.noCollapseIcon=!0),c?g.children.length>0?_rasterizeChildren(i,a,b,c,d,e,f):e||_rasterizeDetailRows(g,i,b,f):g.collapsed||(g.children.length>0?_rasterizeChildren(i,a,b,c,d,f):_rasterizeDetailRows(g,i,b,f)),i}function rasterizeTreeForRender(){addExtraColumnForSubtotalBy.call(this);const a=rasterizeTree({node:this.state.rootNode,firstColumn:this.state.columnDefs[0],hideSingleSubtotalChild:this.props.hideSingleSubtotalChild},this.state.subtotalBy.length>0);1==this.props.disableGrandTotal?this.state.maxRows=a.length:(this.state.maxRows=a.length-1,this.state.grandTotal=a.splice(0,1).map(rowMapper,this)),this.state.rasterizedData=a,this.state.buildRasterizedData=!1}function _rasterizeChildren(a,b,c,d,e,f,g){var h,i,j,k=b.node,l=b.firstColumn;for(h=0;h<k.children.length;h++)for(j=rasterizeTree({hideSingleSubtotalChild:b.hideSingleSubtotalChild,node:k.children[h],firstColumn:l},c,d,e,f,g),i=0;i<j.length;i++)j[i].treeNode&&j[i].treeNode.hiddenByFilter||a.push(j[i])}function _rasterizeDetailRows(a,b,c,d){for(var e=0;e<a.ultimateChildren.length;e++){var f=a.ultimateChildren[e];if(d)f.hiddenByFilter||(f.sectorPath=a.rowData.sectorPath,f.isDetail=!0,f.parent=a,f.indexInParent=e,b.push(f));else{var g=c&&f.hiddenBySingleSubtotalRow;f.hiddenByFilter||g||(f.sectorPath=a.rowData.sectorPath,f.isDetail=!0,f.parent=a,f.indexInParent=e,b.push(f))}}}function _decorateRowData(a,b,c,d){return a.rowData.sectorPath=a.getSectorPath(),c&&(a.rowData[b.colTag]=a.sectorTitle),d||(a.rowData.treeNode=a),a}const WEEKLY="Weekly",MONTHLY="Monthly",QUARTERLY="Quarterly",YEARLY="Yearly",DAILY="Daily",DATE_FORMAT="date",OLDEST="Oldest",InfoBox=React.createClass({displayName:"InfoBox",propTypes:{title:React.PropTypes.string.isRequired,text:React.PropTypes.string.isRequired,styles:React.PropTypes.object},getInitialState:function(){return{showInfoBox:!1}},getDefaultProps:function(){return{styles:{position:"absolute",whiteSpace:"normal",top:"150%",right:"0",fontSize:"10px",textShadow:"none",backgroundColor:"#f0f3f5",color:"#4a5564",width:"250px",padding:"10px",borderRadius:"1px"}}},showInfoBox:function(){this.setState({showInfoBox:!0})},hideInfoBox:function(){this.setState({showInfoBox:!1})},render:function(){var a=this.state.showInfoBox?React.createElement("div",{style:this.props.styles},React.createElement("div",null,this.props.text)):null;return React.createElement("div",{style:{position:"relative"},className:"menu-item",onMouseEnter:this.showInfoBox,onMouseLeave:this.hideInfoBox},React.createElement("div",null,this.props.title),a)}}),SubMenu=React.createClass({displayName:"SubMenu",propTypes:{subMenu:React.PropTypes.object,menuItem:React.PropTypes.object,onMenuClick:React.PropTypes.func,table:React.PropTypes.object},getDefaultProps:function(){return{onMenuClick:function(){}}},getInitialState:function(){return{showSubMenu:!1}},showSubMenu:function(){var a=$(this.props.table.getDOMNode()).width(),b=$(this.getDOMNode()).parent().position();this.state.subMenu=this.props.subMenu,a-b.left<200?(delete this.state.subMenu.props.style.left,this.state.subMenu.props.style.right="100%"):(delete this.state.subMenu.props.style.right,this.state.subMenu.props.style.left="100%"),this.setState({showSubMenu:!0})},hideSubMenu:function(){this.setState({showSubMenu:!1})},render:function(){const a=this.state.showSubMenu?this.state.subMenu:null;return React.createElement("div",{onClick:this.props.onMenuClick,className:"menu-item",style:{position:"relative"},onMouseEnter:this.showSubMenu,onMouseLeave:this.hideSubMenu},this.props.menuItem,a)}});var NumericFilterPanel=React.createClass({displayName:"NumericFilterPanel",getInitialState:function(){return{entry0:{checked:!0,dropdown:"gt",input:""},entry1:{checked:!1,dropdown:"gt",input:""}}},handleChange:function(a){var b=$(this.getDOMNode()),c=b.find(".rt-numeric-checkbox");this.props.clearFilter(this.props.colDef);for(var d=[],e=0;e<c.length;e++){var f={},g=b.find(".rt-numeric-input").eq(e).val(),h=b.find(".rt-numeric-dropdown").eq(e).find(":selected").val();f[h]=g,c.eq(e).is(":checked")?(d.push(f),this.state["entry"+e].checked=!0):this.state["entry"+e].checked=!1,this.state["entry"+e].dropdown=h,this.state["entry"+e].input=g}this.props.addFilter(this.props.colDef,d),this.setState({entry0:this.state.entry0,entry1:this.state.entry1})},changeCheckbox:function(a){var b="entry"+$(a.target).data("order");this.state[b].checked=a.target.checked,this.setState({entryName:this.state[b]})},render:function(){var a={width:"70px"};return React.createElement("div",null,React.createElement("input",{"data-order":"0",className:"rt-numeric-checkbox",type:"checkbox",checked:this.state.entry0.checked,onChange:this.changeCheckbox}),React.createElement("select",{"data-order":"0",className:"rt-numeric-dropdown"},React.createElement("option",{value:"gt"},"Greater Than"),React.createElement("option",{value:"lt"},"Less Than"),React.createElement("option",{value:"eq"},"Equals")),React.createElement("input",{"data-order":"0",className:"rt-numeric-input",style:a,type:"number"}),React.createElement("br",null),React.createElement("input",{"data-order":"1",className:"rt-numeric-checkbox",type:"checkbox",checked:this.state.entry1.checked,onChange:this.changeCheckbox}),React.createElement("select",{"data-order":"1",className:"rt-numeric-dropdown"},React.createElement("option",{value:"gt"},"Greater Than"),React.createElement("option",{value:"lt"},"Less Than"),React.createElement("option",{value:"eq"},"Equals")),React.createElement("input",{"data-order":"1",className:"rt-numeric-input",style:a,type:"number"}),React.createElement("br",null),React.createElement("button",{onClick:this.handleChange},"Submit"))}}),idCounter=0,ReactTable=React.createClass({displayName:"ReactTable",getInitialState:ReactTableGetInitialState,propTypes:{data:React.PropTypes.arrayOf(React.PropTypes.object).isRequired,columnDefs:React.PropTypes.arrayOf(React.PropTypes.object).isRequired,subtotalBy:React.PropTypes.arrayOf(React.PropTypes.object),sortBy:React.PropTypes.arrayOf(React.PropTypes.object),selectedRows:React.PropTypes.arrayOf(React.PropTypes.string),rowKey:React.PropTypes.string,cellRightClickMenu:React.PropTypes.object,afterColumnRemove:React.PropTypes.func,beforeColumnAdd:React.PropTypes.func,onSelectCallback:React.PropTypes.func,onSummarySelectCallback:React.PropTypes.func,onRowClickCallback:React.PropTypes.func,onSummaryRowClickCallback:React.PropTypes.func,onRightClick:React.PropTypes.func,afterFilterCallback:React.PropTypes.func,buildFiltersCallback:React.PropTypes.func,checkboxCallback:React.PropTypes.func,disableAddColumn:React.PropTypes.bool,disablePagination:React.PropTypes.bool,disableInfiniteScrolling:React.PropTypes.bool,disableExporting:React.PropTypes.bool,disableGrandTotal:React.PropTypes.bool,enableScrollPage:React.PropTypes.bool,hideSubtotaledColumns:React.PropTypes.bool,hideSingleSubtotalChild:React.PropTypes.bool,hasCheckbox:React.PropTypes.bool,disableRemoveColumn:React.PropTypes.bool,disableDownloadPDF:React.PropTypes.bool,pageSize:React.PropTypes.number},getDefaultProps:function(){return{pageSize:50,extraStyle:{cursor:"pointer"},subtotalBy:[],sortBy:[]}},handleSetSort:function(a,b,c){c.stopPropagation();const d=this.state.sortBy,e=findDefByColTag(d,a.colTag);b=b||(e&&"asc"===e.sortType?"desc":"asc"),d.length>0&&(d.length=0),d.push({colTag:a.colTag,sortType:b});var f={sortBy:d};"subtotalBy"===a.colTag?this.state.rootNode.sortTreeBySubtotals(this.state.subtotalBy,b):this.state.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,d)),f.rootNode=this.state.rootNode,f.buildRasterizedData=!0,this.setState(f)},handleAddSort:function(a,b,c){c.stopPropagation();const d=this.state.sortBy;var e=findPositionByColTag(d,a.colTag);-1!=e?d[e].sortType=b:d.push({colTag:a.colTag,sortType:b});var f={sortBy:d};this.state.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,d)),f.rootNode=this.state.rootNode,f.buildRasterizedData=!0,this.setState(f)},clearSort:function(a){a.stopPropagation();const b=this.state,c=this.state.sortBy;c.length=0,b.sortBy=c,b.rootNode=createNewRootNode(this.props,this.state),b.buildRasterizedData=!0,this.setState(b)},handleColumnFilter:ReactTableHandleColumnFilter,handleClearFilter:ReactTableHandleRemoveFilter,handleClearAllFilters:ReactTableHandleRemoveAllFilters,handleAdd:ReactTableHandleAdd,handleRemove:ReactTableHandleRemove,handleToggleHide:ReactTableHandleToggleHide,handleSubtotalBy:ReactTableHandleSubtotalBy,handleClearSubtotal:ReactTableHandleClearSubtotal,handlePageClick:ReactTableHandlePageClick,handleSelect:ReactTableHandleSelect,handleCollapseAll:function(){this.state.rootNode.foldSubTree(),this.state.rootNode.collapseImmediateChildren(),this.setState({currentPage:1,lowerVisualBound:0,upperVisualBound:this.props.pageSize,buildRasterizedData:!0})},handleExpandAll:function(){this.state.rootNode.expandRecursively(),this.setState({currentPage:1,lowerVisualBound:0,upperVisualBound:this.props.pageSize,buildRasterizedData:!0})},handleDownload:function(a){var b=this,c={headers:[],data:[]},d=this.state.columnDefs[0],e=rasterizeTree({node:this.state.rootNode,firstColumn:d}),f=buildFirstColumnLabel(this);$.each(this.props.columnDefs,function(){"subtotalBy"===this.colTag?c.headers.push(f):c.headers.push(this.text)}),$.each(e,function(){if("Grand Total"!==this[d.colTag]){var a=[],e=this;$.each(b.props.columnDefs,function(){a.push(buildCellLookAndFeel(this,e).value)}),c.data.push(a)}}),"excel"===a?exportToExcel(c,this.props.filenameToSaveAs?this.props.filenameToSaveAs:"table-export",this):"pdf"===a&&exportToPDF(c,this.props.filenameToSaveAs?this.props.filenameToSaveAs:"table-export",this)},toggleSelectDetailRow:function(a){var b,c=this.state.selectedDetailRows;return null!=c[a]?(delete c[a],b=!1):(c[a]=!0,b=!0),this.setState({selectedDetailRows:c}),b},toggleSelectSummaryRow:function(a){var b,c=this.state.selectedSummaryRows;return null!=c[a]?(delete c[a],b=!1):(c[a]=1,b=!0),this.setState({selectedSummaryRows:c}),b},forceSort:function(){this.state.rootNode.sortNodes(convertSortByToFuncs(this.state.columnDefs,this.state.sortBy)),this.setState({buildRasterizedData:!0})},getDetailToggleState:function(a){return this.state.selectedDetailRows[a]&&!0},clearAllRowSelections:function(){this.setState({selectedDetailRows:{},selectedSummaryRows:{}})},getRowSelectionStates:function(){return{selectedDetailRows:this.state.selectedDetailRows,selectedSummaryRows:this.state.selectedSummaryRows}},addColumn:function(a,b){var c=this.state.columnDefs;a.colTag&&-1==findPositionByColTag(c,a.colTag)&&(b?c.splice(b+1,0,a):c.push(a),recursivelyAggregateNodes(this.state.rootNode,this.state),this.setState({columnDefs:c,buildRasterizedData:!0}))},handleScroll:function(a){const b=$(a.target),c=b.scrollTop();if(c!=this.state.lastScrollTop){const d=b.height(),e=b.find("tbody").height(),f=e/b.find("tbody > tr").length;var g={lastScrollTop:c};const h=2*this.props.pageSize;if(c<this.state.lastScrollTop&&0>=c)g.lowerVisualBound=Math.max(this.state.lowerVisualBound-this.props.pageSize,0),g.upperVisualBound=g.lowerVisualBound+h,0!==g.lowerVisualBound&&setTimeout(function(){b.scrollTop(Math.max(c+this.props.pageSize*f,0))}.bind(this));else if(c>this.state.lastScrollTop&&c+d>=e){g.upperVisualBound=this.state.upperVisualBound+this.props.pageSize>this.state.maxRows?this.state.maxRows:this.state.upperVisualBound+this.props.pageSize,g.lowerVisualBound=Math.max(g.upperVisualBound-h,0);const i=Math.max(g.upperVisualBound-this.state.upperVisualBound,0);i>0&&setTimeout(function(){var a=c-i*f;a>0&&b.scrollTop(a)}.bind(this))}this.setState(g)}},componentDidMount:function(){this.props.disableInfiniteScrolling||$(this.getDOMNode()).find(".rt-scrollable").get(0).addEventListener("scroll",this.handleScroll),setTimeout(function(){adjustHeaders.call(this)}.bind(this),0),setTimeout(function(){adjustHeaders.call(this)}.bind(this),500),document.addEventListener("click",docClick.bind(this)),window.addEventListener("resize",adjustHeaders.bind(this));var a=$(this.getDOMNode());a.find(".rt-scrollable").bind("scroll",function(){a.find(".rt-headers").css({overflow:"auto"}).scrollLeft($(this).scrollLeft()),a.find(".rt-headers").css({overflow:"hidden"}),a.find(".rt-grand-total").css({overflow:"auto"}).scrollLeft($(this).scrollLeft()),a.find(".rt-grand-total").css({overflow:"hidden"})}),bindHeadersToMenu(a),buildFilterData.call(this,!1)},componentWillMount:function(){},componentWillUnmount:function(){window.removeEventListener("resize",adjustHeaders.bind(this)),this.props.disableInfiniteScrolling&&$(this.getDOMNode()).find(".rt-scrollable").get(0).removeEventListener("scroll",this.handleScroll)},componentDidUpdate:function(){this.state.scrollToLeft&&(this.state.scrollToLeft=!1,$(this.refs.scrollBody.getDOMNode()).scrollLeft(0)),adjustHeaders.call(this),bindHeadersToMenu($(this.getDOMNode()))},addFilter:function(a,b){this.handleColumnFilter.call(this,a,b,!1)},removeFilter:function(a,b){this.handleClearFilter.call(this,a,b)},removeAllFilter:function(){this.handleClearAllFilters.call(this)},exportDataWithSubtotaling:function(){for(var a=rasterizeTree({node:this.state.rootNode,firstColumn:this.state.columnDefs[0]},this.state.subtotalBy.length>0,!0),b=0;b<a.length;b++){var c=a[b];c.treeNode&&delete c.treeNode,
c.parent&&delete c.parent}return a},exportLeafSubtotaledData:function(){for(var a=rasterizeTree({node:this.state.rootNode,firstColumn:this.state.columnDefs[0]},this.state.subtotalBy.length>0,!0,!1,!0),b=[],c=this.state.subtotalBy.length+1,d=1;d<a.length;d++)if(a[d].sectorPath.length==c){var e=$.extend({},a[d]);e.treeNode&&delete e.treeNode,e.parent&&delete e.parent,e.subtotalBy=flatSectorPath(e.sectorPath),b.push(e)}return b},recreateTable:function(){this.state.rootNode=createNewRootNode(this.props,this.state)},exportDataWithoutSubtotaling:function(a){for(var b=rasterizeTree({node:this.state.rootNode,firstColumn:this.state.columnDefs[0]},this.state.subtotalBy.length>0,!0,!0,!1,a),c=[],d=0;d<b.length;d++){var e=$.extend({},b[d]);e.treeNode&&delete e.treeNode,e.parent&&delete e.parent,c.push(e)}return c},refresh:function(){this.setState({buildRasterizedData:!0})},getSubtotals:function(){return this.state.subtotalBy},getSorts:function(){return this.state.sortBy},checkAllRows:function(a){checkAllChildren(this.state.rootNode,a),this.setState({})},refreshSubtotalRow:function(){recursivelyAggregateNodes(this.state.rootNode,this.state),this.setState({buildRasterizedData:!0})},render:function(){this.state.rasterizedData&&!this.state.buildRasterizedData||rasterizeTreeForRender.call(this);const a=this.state.rasterizedData;var b=getPaginationAttr(this,a),c=this.state.grandTotal,d=[];d=this.props.disableInfiniteScrolling?a.slice(b.lowerVisualBound,b.upperVisualBound+1).map(rowMapper,this):a.slice(this.state.lowerVisualBound,this.state.upperVisualBound+1).map(rowMapper,this);var e=buildHeaders(this);this.state.rowNumToDisplay=d.length;var f={};return this.props.height&&parseInt(this.props.height)>0&&(f.height=this.props.height),this.props.disableScrolling&&(f.overflowY="hidden"),React.createElement("div",{id:this.state.uniqueId,className:"rt-table-container"},e,React.createElement("div",{ref:"scrollBody",style:f,className:"rt-scrollable",onWheel:this.props.enableScrollPage?scrollPage.bind(this,b):null},React.createElement("table",{ref:"tableBody",className:"rt-table"},React.createElement("tbody",null,d))),this.props.disableGrandTotal===!0?null:c,buildFooter.call(this,b,a.length))}}),Row=React.createClass({displayName:"Row",render:function(){const a=React.addons.classSet;var b=[],c=this.props.table,d=!1,e=this.props.table.state.subtotalBy;this.props.data.isDetail||1!=this.props.data.sectorPath.length||"Grand Total"!=this.props.data.sectorPath[0]||(d=!0);for(var f=0;f<this.props.columnDefs.length;f++){var g=this.props.columnDefs[f];if(c.props.hideSubtotaledColumns){var h=c.state.subtotalBy.some(function(a){return a.colTag===g.colTag});if(h)continue}if(0===f&&c.state.subtotalBy.length>0)b.push(buildFirstCellForSubtotalRow.call(this,d,!this.props.data.isDetail));else{var i=buildCellLookAndFeel(g,this.props.data,!0),j=a(i.classes),k=g.isLoading?"Loading ... ":i.value;if(g.cellTemplate&&(k=g.cellTemplate.call(this,this.props.data,g,k)),d){var l={textAlign:i.styles.textAlign};k&&(l.width=k.length/2+2+"em"),b.push(React.createElement("div",{className:j+" rt-grand-total-cell",key:g.colTag},React.createElement("div",{className:"rt-grand-total-cell-content",style:l},k?k:React.createElement("span",null," "))))}else b.push(React.createElement("td",{className:j,ref:g.colTag,onClick:g.onCellSelect?g.onCellSelect.bind(null,this.props.data[g.colTag],g,f):null,onContextMenu:this.props.cellRightClickMenu?openCellMenu.bind(this,g,i.omitted):this.props.onRightClick?this.props.onRightClick.bind(null,this.props.data,g):null,style:i.styles,key:g.colTag,onMouseEnter:i.omitted?showCellOmitContent.bind(this,g):null,onMouseLeave:i.omitted?hideCellOmitContent.bind(this,g):null,onDoubleClick:g.onDoubleClick?g.onDoubleClick.bind(null,this.props.data[g.colTag],g,f,this.props.data):this.props.filtering&&this.props.filtering.doubleClickCell?this.props.handleColumnFilter(null,g):null},k,this.props.cellRightClickMenu?buildCellMenu(this.props.cellRightClickMenu,this.props.data,g,this.props.columnDefs,e):null,i.omitted?buildLabelForOmitCell(g,this.props.data):null))}}return j=a({selected:this.props.isSelected&&this.props.data.isDetail,"summary-selected":this.props.isSelected&&!this.props.data.isDetail,"group-background":!this.props.data.isDetail}),d?(b.push(React.createElement("span",{className:"rt-grand-total-cell"})),React.createElement("div",{className:"rt-grand-total"},b)):React.createElement("tr",{onClick:this.props.onSelect.bind(null,this.props.data),onMouseDown:mouseDown.bind(this,this.props.data),onMouseUp:mouseUp.bind(this,this.props.data),className:j,style:this.props.extraStyle},b)}}),PageNavigator=React.createClass({displayName:"PageNavigator",handleClick:function(a,b){b.preventDefault(),a<=this.props.numPages&&a>=1&&this.props.handleClick(a)},render:function(){var a=this,b=React.addons.classSet,c=b({disabled:1==this.props.activeItem}),d=b({disabled:this.props.activeItem==this.props.numPages}),e=this.props.items.map(function(b){return React.createElement("li",{key:b,className:a.props.activeItem==b?"active":""},React.createElement("a",{onClick:a.handleClick.bind(null,b)},b))});return React.createElement("ul",{className:c,className:"pagination pull-right"},React.createElement("li",{className:d},React.createElement("a",{className:c,onClick:this.props.handleClick.bind(null,this.props.activeItem-1)},"«")),e,React.createElement("li",{className:d},React.createElement("a",{className:d,onClick:this.props.handleClick.bind(null,this.props.activeItem+1)},"»")))}}),SubtotalControl=React.createClass({displayName:"SubtotalControl",getInitialState:function(){return{userInputBuckets:""}},handleChange:function(a){this.setState({userInputBuckets:a.target.value})},handleKeyPress:function(a){13==a.charCode&&(a.preventDefault(),this.props.table.handleSubtotalBy(this.props.columnDef,this.state.userInputBuckets))},handleClick:function(a){a.stopPropagation();var b=$(this.getDOMNode());b.children(".menu-item-input").children("input").focus()},render:function(){var a=this.props.table,b=this.props.columnDef,c=null;return"number"!=b.format&&"currency"!=b.format||(c=React.createElement("div",{className:"menu-item-input",style:{position:"absolute",top:"-50%",right:"100%"}},React.createElement("label",{style:{display:"block"}},"Enter Bucket(s)"),React.createElement("input",{tabIndex:"1",onKeyPress:this.handleKeyPress,onChange:this.handleChange,placeholder:"ex: 1,10,15"}),React.createElement("a",{tabIndex:"2",style:{display:"block"},onClick:a.handleSubtotalBy.bind(null,b,this.state.userInputBuckets),className:"btn-link"},"Ok"))),b.format==DATE_FORMAT&&null!=b.formatInstructions&&(c=React.createElement("div",{className:"menu-item-input",style:{position:"absolute",top:"-50%",right:"100%"}},React.createElement("label",{style:{display:"block"}},"Enter Bucket(s)"),React.createElement("input",{tabIndex:"1",onKeyPress:this.handleKeyPress,onChange:this.handleChange,placeholder:"ex: 1/8/2013, 5/12/2014, 3/10/2015"}),React.createElement("a",{tabIndex:"2",style:{display:"block"},onClick:a.handleSubtotalBy.bind(null,b,this.state.userInputBuckets),className:"btn-link"},"Ok"))),React.createElement("div",{onClick:null==c?a.handleSubtotalBy.bind(null,b,null):this.handleClick,style:{position:"relative"},className:"menu-item menu-item-hoverable"},React.createElement("div",null,React.createElement("span",null,React.createElement("i",{className:"fa fa-plus"})," Add Subtotal")),c)}}),SubtotalControlForDates=React.createClass({displayName:"SubtotalControlForDates",getInitialState:function(){return{userInputBuckets:""}},handleChange:function(a){this.setState({userInputBuckets:a.target.value})},handleKeyPress:function(a){13==a.charCode&&(a.preventDefault(),this.props.table.handleSubtotalBy(this.props.columnDef,this.state.userInputBuckets))},handleClick:function(a){a.stopPropagation();var b=$(this.getDOMNode());b.children(".menu-item-input").children("input").focus()},render:function(){var a=this.props.table,b=this.props.columnDef,c=null,d=this.props.freq;return d==WEEKLY?React.createElement("div",{onClick:null==c?a.handleSubtotalBy.bind(null,b,WEEKLY):this.handleClick,style:{position:"relative"},className:"menu-item menu-item-hoverable"},React.createElement("div",null,React.createElement("span",null,WEEKLY)),c):d==MONTHLY?React.createElement("div",{onClick:null==c?a.handleSubtotalBy.bind(null,b,MONTHLY):this.handleClick,style:{position:"relative"},className:"menu-item menu-item-hoverable"},React.createElement("div",null,React.createElement("span",null,MONTHLY)),c):d==DAILY?React.createElement("div",{onClick:null==c?a.handleSubtotalBy.bind(null,b,DAILY):this.handleClick,style:{position:"relative"},className:"menu-item menu-item-hoverable"},React.createElement("div",null,React.createElement("span",null,DAILY)),c):d==QUARTERLY?React.createElement("div",{onClick:null==c?a.handleSubtotalBy.bind(null,b,QUARTERLY):this.handleClick,style:{position:"relative"},className:"menu-item menu-item-hoverable"},React.createElement("div",null,React.createElement("span",null,QUARTERLY)),c):d==YEARLY?React.createElement("div",{onClick:null==c?a.handleSubtotalBy.bind(null,b,YEARLY):this.handleClick,style:{position:"relative"},className:"menu-item menu-item-hoverable"},React.createElement("div",null,React.createElement("span",null,YEARLY)),c):void 0}});const lexicalSorter={asc:function(a,b){var c=0;return!a[this.colTag]&&(0!==a[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)&&b[this.colTag]?c=1:a[this.colTag]&&!b[this.colTag]&&(0!==b[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)?c=-1:a[this.colTag]<b[this.colTag]?c=-1:a[this.colTag]>b[this.colTag]&&(c=1),c},desc:function(a,b){var c=0;return!a[this.colTag]&&(0!==a[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)&&b[this.colTag]?c=1:a[this.colTag]&&!b[this.colTag]&&(0!==b[this.colTag]||this.formatConfig&&this.formatConfig.showZeroAsBlank)?c=-1:a[this.colTag]<b[this.colTag]?c=1:a[this.colTag]>b[this.colTag]&&(c=-1),c}},dateSorter={asc:function(a,b){var c=a[this.colTag]?a[this.colTag]:0,d=b[this.colTag]?b[this.colTag]:0;return new Date(c)-new Date(d)},desc:function(a,b){return-1*dateSorter.asc.call(this,a,b)}};TreeNode.prototype.appendUltimateChild=function(a){this.ultimateChildren.push(a)},TreeNode.prototype.collapseImmediateChildren=function(){for(var a=0;a<this.children.length;a++)this.children[a].collapsed=!0},TreeNode.prototype.foldSubTree=function(){for(var a=0;a<this.children.length;a++)this.children[a].hasChild()?this.children[a].collapsed=!1:this.children[a].collapsed=!0,this.children[a].foldSubTree()},TreeNode.prototype.hasChild=function(){return this.children.length>0},TreeNode.prototype.expandRecursively=function(){var a;for(a=0;a<this.children.length;a++)this.children[a].collapsed=!1,this.children[a].expandRecursively()},TreeNode.prototype.appendRowToChildren=function(a){var b=a.childSectorName,c=a.childRow,d=a.sortIndex,e=a.subtotalByColumnDef;if(null==this._childrenSectorNameMap[b]){var f=new TreeNode(b,this);f.sortIndex=d,f.subtotalByColumnDef=e,this.children.push(f),this._childrenSectorNameMap[b]=f}return c&&this._childrenSectorNameMap[b].appendUltimateChild(c),this._childrenSectorNameMap[b]},TreeNode.prototype.getSectorPath=function(){for(var a=[this.sectorTitle],b=this.parent;null!=b;)a.unshift(b.sectorTitle),b=b.parent;return a},TreeNode.prototype.sortTreeBySubtotals=function(a,b){sortTreeBySubtotalsHelper(a,b,this,0)},TreeNode.prototype.sortNodes=function(a){this.hasChild()?(this.children.sort(buildCompositeSorter(a,!0)),$.each(this.children,function(b,c){c.sortNodes(a)})):this.ultimateChildren.sort(buildCompositeSorter(a,!1))},TreeNode.prototype.filterByColumn=function(a,b,c,d){"number"===a.format?this.filterByNumericColumn(a,b):this.filterByTextColumn(a,b,c,d)},TreeNode.prototype.filterByTextColumn=function(a,b,c,d){if(this.hasChild()){for(var e=!0,f=0;f<this.children.length;f++)this.children[f].filterByColumn(a,b,c,d),0==this.children[f].hiddenByFilter&&(e=!1);this.hiddenByFilter=e}else{for(var g=!1,f=0;f<this.ultimateChildren.length;f++){var h=this.ultimateChildren[f];if(d)h.hiddenByFilter=!d(a,h,b);else{var i={};i[a.colTag]=h[a.colTag],"date"!==a.format||containsWildcart(b)||"partitions"==b[0]||(i[a.colTag]=convertDateNumberToString(a,i[a.colTag]),b=b.map(function(b){var c=b;return"string"==typeof b&&(c=parseInt(b),1e5>c&&(c=b)),convertDateNumberToString(a,c)})),h.hiddenByFilter="undefined"==typeof i[a.colTag]||h.hiddenByFilter||filterInArray(b,a,i,c)}g=g||!h.hiddenByFilter}this.hiddenByFilter=!g}},TreeNode.prototype.filterByNumericColumn=function(a,b){if(this.hasChild()){for(var c=!0,d=0;d<this.children.length;d++)this.children[d].filterByNumericColumn(a,b),0==this.children[d].hiddenByFilter&&(c=!1);this.hiddenByFilter=c}else{for(var e=!1,d=0;d<this.ultimateChildren.length;d++){var f=this.ultimateChildren[d],g={};g[a.colTag]=f[a.colTag];for(var h=!1,i=buildLAFConfigObject(a),j=g[a.colTag]*parseFloat(i.multiplier),k=0;k<b.length;k++)if(void 0!==b[k].gt)j>b[k].gt||(h=!0);else if(void 0!==b[k].lt)j<b[k].lt||(h=!0);else if(void 0!==b[k].eq){j=j.toFixed(i.roundTo);var l=b[k].eq.toString().replace(/,/g,"");parseFloat(j)!=parseFloat(l)&&(h=!0)}f.hiddenByFilter=h,e=e||!f.hiddenByFilter}this.hiddenByFilter=!e}},TreeNode.prototype.clearFilter=function(){this.hiddenByFilter=!1},TreeNode.prototype.sortRecursivelyBySortIndex=function(){this.hasChild()&&_hasSortIndex(this.children[0])&&this.children.sort(function(a,b){return _hasSortIndex(a)&&_hasSortIndex(b)?a.sortIndex-b.sortIndex:0});for(var a=0;a<this.children.length;a++)this.children[a].sortRecursivelyBySortIndex()};